{"version":3,"sources":["OverlayProvider.tsx"],"names":["OverlayProvider","props","AttachmentPickerBottomSheetHandle","DefaultAttachmentPickerBottomSheetHandle","attachmentPickerBottomSheetHandleHeight","attachmentPickerBottomSheetHeight","AttachmentPickerError","DefaultAttachmentPickerError","attachmentPickerErrorButtonText","AttachmentPickerErrorImage","DefaultAttachmentPickerErrorImage","attachmentPickerErrorText","attachmentSelectionBarHeight","bottomInset","CameraSelectorIcon","DefaultCameraSelectorIcon","children","closePicker","ref","current","close","FileSelectorIcon","DefaultFileSelectorIcon","giphyVersion","i18nInstance","imageGalleryCustomComponents","imageGalleryGridHandleHeight","imageGalleryGridSnapPoints","ImageOverlaySelectedComponent","DefaultImageOverlaySelectedComponent","ImageSelectorIcon","DefaultImageSelectorIcon","MessageActionList","MessageActionListItem","messageTextNumberOfLines","numberOfAttachmentImagesToLoadPerCall","numberOfAttachmentPickerImageColumns","numberOfImageGalleryGridColumns","openPicker","snapToIndex","console","warn","topInset","translucentStatusBar","OverlayReactionList","OverlayReactions","OverlayReactionsAvatar","value","attachmentPickerProps","bottomSheetRef","t","key","tDateTimeParser","input","translators","setTranslators","overlay","setOverlay","overlayOpacity","Dimensions","get","height","width","loadingTranslators","backAction","backHandler","BackHandler","addEventListener","remove","attachmentPickerContext","overlayStyle","opacity","overlayContext","style","StyleSheet","absoluteFill"],"mappings":"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","sourcesContent":["import React, { PropsWithChildren, useEffect, useRef, useState } from 'react';\n\nimport { BackHandler, Dimensions, StyleSheet, ViewStyle } from 'react-native';\n\nimport Animated, {\n  cancelAnimation,\n  useAnimatedStyle,\n  useSharedValue,\n  withTiming,\n} from 'react-native-reanimated';\n\nimport type BottomSheet from '@gorhom/bottom-sheet';\nimport Dayjs from 'dayjs';\n\nimport { OverlayContext, OverlayProviderProps } from './OverlayContext';\n\nimport { AttachmentPicker } from '../../components/AttachmentPicker/AttachmentPicker';\n\nimport { AttachmentPickerBottomSheetHandle as DefaultAttachmentPickerBottomSheetHandle } from '../../components/AttachmentPicker/components/AttachmentPickerBottomSheetHandle';\nimport { AttachmentPickerError as DefaultAttachmentPickerError } from '../../components/AttachmentPicker/components/AttachmentPickerError';\nimport { AttachmentPickerErrorImage as DefaultAttachmentPickerErrorImage } from '../../components/AttachmentPicker/components/AttachmentPickerErrorImage';\nimport { CameraSelectorIcon as DefaultCameraSelectorIcon } from '../../components/AttachmentPicker/components/CameraSelectorIcon';\nimport { FileSelectorIcon as DefaultFileSelectorIcon } from '../../components/AttachmentPicker/components/FileSelectorIcon';\nimport { ImageOverlaySelectedComponent as DefaultImageOverlaySelectedComponent } from '../../components/AttachmentPicker/components/ImageOverlaySelectedComponent';\nimport { ImageSelectorIcon as DefaultImageSelectorIcon } from '../../components/AttachmentPicker/components/ImageSelectorIcon';\nimport { ImageGallery } from '../../components/ImageGallery/ImageGallery';\nimport { MessageOverlay } from '../../components/MessageOverlay/MessageOverlay';\nimport { OverlayBackdrop } from '../../components/MessageOverlay/OverlayBackdrop';\nimport { ChannelsStateProvider } from '../../contexts/channelsStateContext/ChannelsStateContext';\nimport { useStreami18n } from '../../hooks/useStreami18n';\n\nimport type { DefaultStreamChatGenerics } from '../../types/types';\nimport { AttachmentPickerProvider } from '../attachmentPickerContext/AttachmentPickerContext';\nimport { ImageGalleryProvider } from '../imageGalleryContext/ImageGalleryContext';\nimport { MessageOverlayProvider } from '../messageOverlayContext/MessageOverlayContext';\nimport { ThemeProvider } from '../themeContext/ThemeContext';\nimport {\n  TranslationContextValue,\n  TranslationProvider,\n} from '../translationContext/TranslationContext';\n\n/**\n * - The highest level of these components is the `OverlayProvider`. The `OverlayProvider` allows users to interact with messages on long press above the underlying views, use the full screen image viewer, and use the `AttachmentPicker` as a keyboard-esk view.\n *  Because these views must exist above all others `OverlayProvider` should wrap your navigation stack as well. Assuming [`React Navigation`](https://reactnavigation.org/) is being used, your highest level navigation stack should be wrapped in the provider:\n *\n *    ```js\n *    <NavigationContainer>\n *      <OverlayProvider>\n *        <Stack.Navigator>\n *          <Stack.Screen />\n *        </Stack.Navigator>\n *      </OverlayProvider>\n *    </NavigationContainer>\n *    ```\n *\n * - Don't forget to check our cookbook section of [OverlayProvider](https://github.com/GetStream/stream-chat-react-native/wiki/Cookbook-v3.0#overlayprovider)\n *\n * - Also check the [visual component guide](https://github.com/GetStream/stream-chat-react-native/wiki/Cookbook-v3.0#custom-components), to learn about component customizations.\n *\n * @example ./OverlayProvider.md\n */\nexport const OverlayProvider = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>(\n  props: PropsWithChildren<OverlayProviderProps<StreamChatGenerics>>,\n) => {\n  const {\n    AttachmentPickerBottomSheetHandle = DefaultAttachmentPickerBottomSheetHandle,\n    attachmentPickerBottomSheetHandleHeight,\n    attachmentPickerBottomSheetHeight,\n    AttachmentPickerError = DefaultAttachmentPickerError,\n    attachmentPickerErrorButtonText,\n    AttachmentPickerErrorImage = DefaultAttachmentPickerErrorImage,\n    attachmentPickerErrorText,\n    attachmentSelectionBarHeight,\n    bottomInset,\n    CameraSelectorIcon = DefaultCameraSelectorIcon,\n    children,\n    closePicker = (ref) => {\n      if (ref.current) {\n        ref.current.close();\n      }\n    },\n    FileSelectorIcon = DefaultFileSelectorIcon,\n    giphyVersion,\n    i18nInstance,\n    imageGalleryCustomComponents,\n    imageGalleryGridHandleHeight,\n    imageGalleryGridSnapPoints,\n    ImageOverlaySelectedComponent = DefaultImageOverlaySelectedComponent,\n    ImageSelectorIcon = DefaultImageSelectorIcon,\n    MessageActionList,\n    MessageActionListItem,\n    messageTextNumberOfLines,\n    numberOfAttachmentImagesToLoadPerCall,\n    numberOfAttachmentPickerImageColumns,\n    numberOfImageGalleryGridColumns,\n    openPicker = (ref) => {\n      if (ref.current?.snapToIndex) {\n        ref.current.snapToIndex(0);\n      } else {\n        console.warn('bottom and top insets must be set for the image picker to work correctly');\n      }\n    },\n    topInset,\n    translucentStatusBar,\n    OverlayReactionList,\n    OverlayReactions,\n    OverlayReactionsAvatar,\n    value,\n  } = props;\n\n  const attachmentPickerProps = {\n    AttachmentPickerBottomSheetHandle,\n    attachmentPickerBottomSheetHandleHeight,\n    attachmentPickerBottomSheetHeight,\n    AttachmentPickerError,\n    attachmentPickerErrorButtonText,\n    AttachmentPickerErrorImage,\n    attachmentPickerErrorText,\n    attachmentSelectionBarHeight,\n    ImageOverlaySelectedComponent,\n    numberOfAttachmentImagesToLoadPerCall,\n    numberOfAttachmentPickerImageColumns,\n    translucentStatusBar,\n  };\n\n  const bottomSheetRef = useRef<BottomSheet>(null);\n\n  const [translators, setTranslators] = useState<TranslationContextValue>({\n    t: (key: string) => key,\n    tDateTimeParser: (input?: string | number | Date) => Dayjs(input),\n  });\n  const [overlay, setOverlay] = useState(value?.overlay || 'none');\n\n  const overlayOpacity = useSharedValue(0);\n  const { height, width } = Dimensions.get('screen');\n\n  // Setup translators\n  const loadingTranslators = useStreami18n({ i18nInstance, setTranslators });\n\n  useEffect(() => {\n    const backAction = () => {\n      if (overlay !== 'none') {\n        setOverlay('none');\n        return true;\n      }\n\n      return false;\n    };\n\n    const backHandler = BackHandler.addEventListener('hardwareBackPress', backAction);\n\n    return () => backHandler.remove();\n  }, [overlay]);\n\n  useEffect(() => {\n    if (bottomSheetRef.current) {\n      bottomSheetRef.current.close?.();\n    }\n    cancelAnimation(overlayOpacity);\n    if (overlay !== 'none') {\n      overlayOpacity.value = withTiming(1);\n    } else {\n      overlayOpacity.value = withTiming(0);\n    }\n  }, [overlay]);\n\n  // Setup translators\n  useStreami18n({ i18nInstance, setTranslators });\n\n  const attachmentPickerContext = {\n    attachmentPickerBottomSheetHeight,\n    attachmentSelectionBarHeight,\n    bottomInset,\n    CameraSelectorIcon,\n    closePicker: () => closePicker(bottomSheetRef),\n    FileSelectorIcon,\n    ImageSelectorIcon,\n    openPicker: () => openPicker(bottomSheetRef),\n    topInset,\n  };\n\n  const overlayStyle = useAnimatedStyle<ViewStyle>(\n    () => ({\n      opacity: overlayOpacity.value,\n    }),\n    [],\n  );\n\n  const overlayContext = {\n    overlay,\n    setOverlay,\n    style: value?.style,\n    translucentStatusBar,\n  };\n\n  if (loadingTranslators) return null;\n\n  return (\n    <TranslationProvider value={translators}>\n      <OverlayContext.Provider value={overlayContext}>\n        <MessageOverlayProvider<StreamChatGenerics>>\n          <AttachmentPickerProvider value={attachmentPickerContext}>\n            <ImageGalleryProvider>\n              <ChannelsStateProvider<StreamChatGenerics>>{children}</ChannelsStateProvider>\n              <ThemeProvider style={overlayContext.style}>\n                <Animated.View\n                  pointerEvents={overlay === 'none' ? 'none' : 'auto'}\n                  style={[StyleSheet.absoluteFill, overlayStyle]}\n                >\n                  <OverlayBackdrop style={[StyleSheet.absoluteFill, { height, width }]} />\n                </Animated.View>\n                {overlay === 'message' && (\n                  <MessageOverlay<StreamChatGenerics>\n                    MessageActionList={MessageActionList}\n                    MessageActionListItem={MessageActionListItem}\n                    messageTextNumberOfLines={messageTextNumberOfLines}\n                    overlayOpacity={overlayOpacity}\n                    OverlayReactionList={OverlayReactionList}\n                    OverlayReactions={OverlayReactions}\n                    OverlayReactionsAvatar={OverlayReactionsAvatar}\n                  />\n                )}\n                {overlay === 'gallery' && (\n                  <ImageGallery<StreamChatGenerics>\n                    giphyVersion={giphyVersion}\n                    imageGalleryCustomComponents={imageGalleryCustomComponents}\n                    imageGalleryGridHandleHeight={imageGalleryGridHandleHeight}\n                    imageGalleryGridSnapPoints={imageGalleryGridSnapPoints}\n                    numberOfImageGalleryGridColumns={numberOfImageGalleryGridColumns}\n                    overlayOpacity={overlayOpacity}\n                  />\n                )}\n                <AttachmentPicker ref={bottomSheetRef} {...attachmentPickerProps} />\n              </ThemeProvider>\n            </ImageGalleryProvider>\n          </AttachmentPickerProvider>\n        </MessageOverlayProvider>\n      </OverlayContext.Provider>\n    </TranslationProvider>\n  );\n};\n"]}
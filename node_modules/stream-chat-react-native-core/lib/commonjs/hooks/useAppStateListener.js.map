{"version":3,"sources":["useAppStateListener.ts"],"names":["useAppStateListener","onForeground","onBackground","AppState","currentState","appState","setAppState","handleAppStateChange","nextAppState","match","subscription","addEventListener","remove","removeEventListener"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEO,IAAMA,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,YAAD,EAA4BC,YAA5B,EAA0D;AAC3F,kBAAgC,qBAASC,sBAASC,YAAlB,CAAhC;AAAA;AAAA,MAAOC,QAAP;AAAA,MAAiBC,WAAjB;;AACA,MAAMC,oBAAoB,GAAG,wBAC3B,UAACC,YAAD,EAAkC;AAChC,QAAIH,QAAQ,KAAK,YAAb,IAA6BG,YAAY,KAAK,QAA9C,IAA0DP,YAA9D,EAA4E;AAC1EA,MAAAA,YAAY;AACb,KAFD,MAEO,IACLI,QAAQ,CAACI,KAAT,CAAe,iBAAf,KACAD,YAAY,KAAK,YADjB,IAEAN,YAHK,EAIL;AACAA,MAAAA,YAAY;AACb;;AACDI,IAAAA,WAAW,CAACE,YAAD,CAAX;AACD,GAZ0B,EAa3B,CAACN,YAAD,EAAeD,YAAf,EAA6BI,QAA7B,CAb2B,CAA7B;AAgBA,wBAAU,YAAM;AACd,QAAMK,YAAY,GAAGP,sBAASQ,gBAAT,CAA0B,QAA1B,EAAoCJ,oBAApC,CAArB;;AAEA,WAAO,YAAM;AAGX,UAAIG,YAAJ,YAAIA,YAAY,CAAEE,MAAlB,EAA0B;AACxBF,QAAAA,YAAY,CAACE,MAAb;AACD,OAFD,MAEO;AACLT,8BAASU,mBAAT,CAA6B,QAA7B,EAAuCN,oBAAvC;AACD;AACF,KARD;AASD,GAZD,EAYG,CAACA,oBAAD,CAZH;AAaD,CA/BM","sourcesContent":["import { useCallback, useEffect, useState } from 'react';\nimport { AppState, AppStateStatus } from 'react-native';\n\nexport const useAppStateListener = (onForeground?: () => void, onBackground?: () => void) => {\n  const [appState, setAppState] = useState(AppState.currentState);\n  const handleAppStateChange = useCallback(\n    (nextAppState: AppStateStatus) => {\n      if (appState === 'background' && nextAppState === 'active' && onForeground) {\n        onForeground();\n      } else if (\n        appState.match(/active|inactive/) &&\n        nextAppState === 'background' &&\n        onBackground\n      ) {\n        onBackground();\n      }\n      setAppState(nextAppState);\n    },\n    [onBackground, onForeground, appState],\n  );\n\n  useEffect(() => {\n    const subscription = AppState.addEventListener('change', handleAppStateChange);\n\n    return () => {\n      // Following if-else logic is to support RN >= 0.65 and RN < 0.65 versions.\n      // https://github.com/react-native-community/releases/blob/master/CHANGELOG.md#:~:text=EventEmitter%23removeSubscription%20is%20now%20deprecated.%20(cb6cbd12f8%20by%20%40yungsters)\n      if (subscription?.remove) {\n        subscription.remove();\n      } else {\n        AppState.removeEventListener('change', handleAppStateChange);\n      }\n    };\n  }, [handleAppStateChange]);\n};\n"]}
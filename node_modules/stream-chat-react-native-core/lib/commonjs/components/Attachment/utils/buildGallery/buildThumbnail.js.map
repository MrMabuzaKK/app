{"version":3,"sources":["buildThumbnail.ts"],"names":["buildThumbnail","height","image","resizeMode","width","originalImageHeight","original_height","originalImageWidth","original_width","shouldResize","imageUrl","type","url"],"mappings":";;;;;AAQA;;AACA;;AAEO,SAASA,cAAT,OAYO;AAAA,MATZC,MASY,QATZA,MASY;AAAA,MARZC,KAQY,QARZA,KAQY;AAAA,MAPZC,UAOY,QAPZA,UAOY;AAAA,MANZC,KAMY,QANZA,KAMY;AACZ,MAAyBC,mBAAzB,GAAqFH,KAArF,CAAQI,eAAR;AAAA,MAA8DC,kBAA9D,GAAqFL,KAArF,CAA8CM,cAA9C;AAGA,MAAMC,YAAY,GAChBJ,mBAAmB,IAAIE,kBAAvB,GACIF,mBAAmB,GAAGE,kBAAtB,GAA2CN,MAAM,GAAGG,KADxD,GAEI,IAHN;AAIA,MAAMM,QAAQ,GAAG,sDAAwBR,KAAxB,CAAjB;AAEA,SAAO;AACLD,IAAAA,MAAM,EAANA,MADK;AAELE,IAAAA,UAAU,EAAEA,UAAU,GAClBA,UADkB,GAEhBD,KAAK,CAACI,eAAN,IAAyBJ,KAAK,CAACM,cAA/B,GAAgD,SAAhD,GAA4D,OAJ7D;AAKLG,IAAAA,IAAI,EAAET,KAAK,CAACS,IALP;AAMLC,IAAAA,GAAG,EAAEH,YAAY,GACb,4CAAmB;AACjBR,MAAAA,MAAM,EAANA,MADiB;AAEjBW,MAAAA,GAAG,EAAEF,QAFY;AAGjBN,MAAAA,KAAK,EAALA;AAHiB,KAAnB,CADa,GAMbM,QAZC;AAaLN,IAAAA,KAAK,EAALA;AAbK,GAAP;AAeD","sourcesContent":["import type { ImageResizeMode } from 'react-native';\n\nimport type { Attachment } from 'stream-chat';\n\nimport type { Thumbnail } from './types';\n\nimport type { DefaultStreamChatGenerics } from '../../../../types/types';\n\nimport { getResizedImageUrl } from '../../../../utils/getResizedImageUrl';\nimport { getUrlOfImageAttachment } from '../../../../utils/getUrlOfImageAttachment';\n\nexport function buildThumbnail<\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>({\n  height,\n  image,\n  resizeMode,\n  width,\n}: {\n  height: number;\n  image: Attachment<StreamChatGenerics>;\n  width: number;\n  resizeMode?: ImageResizeMode;\n}): Thumbnail {\n  const { original_height: originalImageHeight, original_width: originalImageWidth } = image;\n\n  // Only resize if the original image is larger than the thumbnail container size.\n  const shouldResize =\n    originalImageHeight && originalImageWidth\n      ? originalImageHeight + originalImageWidth > height + width\n      : true;\n  const imageUrl = getUrlOfImageAttachment(image) as string;\n\n  return {\n    height,\n    resizeMode: resizeMode\n      ? resizeMode\n      : ((image.original_height && image.original_width ? 'contain' : 'cover') as ImageResizeMode),\n    type: image.type,\n    url: shouldResize\n      ? getResizedImageUrl({\n          height,\n          url: imageUrl,\n          width,\n        })\n      : imageUrl,\n    width,\n  };\n}\n"]}
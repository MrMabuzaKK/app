{"version":3,"sources":["AnimatedGalleryImage.tsx"],"names":["screenWidth","halfScreenWidth","oneEighth","AnimatedGalleryImage","React","memo","props","index","offsetScale","photo","previous","scale","screenHeight","selected","shouldRender","style","translateX","translateY","AnimatedGalleryImageStyle","xScaleOffset","yScaleOffset","transform","value","scaleX","uri","prevProps","nextProps","displayName"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { View } from 'react-native';\nimport type { ImageStyle, StyleProp } from 'react-native';\nimport Animated, { useAnimatedStyle } from 'react-native-reanimated';\n\nimport { vw } from '../../../utils/utils';\n\nconst screenWidth = vw(100);\nconst halfScreenWidth = vw(50);\nconst oneEighth = 1 / 8;\n\ntype Props = {\n  index: number;\n  offsetScale: Animated.SharedValue<number>;\n  photo: { uri: string };\n  previous: boolean;\n  scale: Animated.SharedValue<number>;\n  screenHeight: number;\n  selected: boolean;\n  shouldRender: boolean;\n  translateX: Animated.SharedValue<number>;\n  translateY: Animated.SharedValue<number>;\n  style?: StyleProp<ImageStyle>;\n};\n\nexport const AnimatedGalleryImage: React.FC<Props> = React.memo(\n  (props) => {\n    const {\n      index,\n      offsetScale,\n      photo,\n      previous,\n      scale,\n      screenHeight,\n      selected,\n      shouldRender,\n      style,\n      translateX,\n      translateY,\n    } = props;\n\n    /**\n     * The current image, designated by selected is scaled and translated\n     * based on the gestures. The rendered images before and after the\n     * currently selected image also translated in X if the scale is\n     * greater than one so they keep the same distance from the selected\n     * image as it is scaled. If the scale is less than one they stay in\n     * place as to not come into the screen when the image shrinks.\n     */\n    const AnimatedGalleryImageStyle = useAnimatedStyle<ImageStyle>(() => {\n      const xScaleOffset = -7 * screenWidth * (0.5 + index);\n      const yScaleOffset = -screenHeight * 3.5;\n      return {\n        transform: [\n          {\n            translateX: selected\n              ? translateX.value + xScaleOffset\n              : scale.value < 1 || scale.value !== offsetScale.value\n              ? xScaleOffset\n              : previous\n              ? translateX.value - halfScreenWidth * (scale.value - 1) + xScaleOffset\n              : translateX.value + halfScreenWidth * (scale.value - 1) + xScaleOffset,\n          },\n          {\n            translateY: selected ? translateY.value + yScaleOffset : yScaleOffset,\n          },\n          {\n            scale: selected ? scale.value / 8 : oneEighth,\n          },\n          { scaleX: -1 },\n        ],\n      };\n    }, [previous, selected]);\n\n    /**\n     * An empty view is rendered for images not close to the currently\n     * selected in order to maintain spacing while reducing the image\n     * load on memory.\n     */\n    if (!shouldRender) {\n      return <View style={[style, { transform: [{ scale: oneEighth }] }]} />;\n    }\n\n    return (\n      <Animated.Image\n        resizeMode={'contain'}\n        source={{ uri: photo.uri }}\n        style={[\n          style,\n          AnimatedGalleryImageStyle,\n          {\n            transform: [\n              { scaleX: -1 },\n              { translateY: -screenHeight * 3.5 },\n              {\n                translateX: -translateX.value + 7 * screenWidth * (0.5 + index),\n              },\n              { scale: oneEighth },\n            ],\n          },\n        ]}\n      />\n    );\n  },\n  (prevProps, nextProps) => {\n    if (\n      prevProps.selected === nextProps.selected &&\n      prevProps.shouldRender === nextProps.shouldRender &&\n      prevProps.photo.uri === nextProps.photo.uri &&\n      prevProps.previous === nextProps.previous &&\n      prevProps.index === nextProps.index &&\n      prevProps.screenHeight === nextProps.screenHeight\n    ) {\n      return true;\n    }\n    return false;\n  },\n);\n\nAnimatedGalleryImage.displayName = 'AnimatedGalleryImage';\n"]}
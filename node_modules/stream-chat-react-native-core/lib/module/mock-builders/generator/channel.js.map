{"version":3,"sources":["channel.js"],"names":["defaultCapabilities","defaultConfig","automod","automod_behavior","commands","args","description","name","set","connect_events","created_at","max_message_length","message_retention","mutes","reactions","read_events","replies","search","typing_events","updated_at","uploads","url_enrichment","defaultState","members","messages","setIsUpToDate","jest","fn","getChannelDefaults","id","type","_client","data","cid","config","created_by","frozen","own_capabilities","state","generateChannel","customValues","Object","keys","reduce","accumulated","current","prototype","hasOwnProperty","call","generateChannelResponse","channel","rest","defaults","user"],"mappings":"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","sourcesContent":["import { v4 as uuidv4 } from 'uuid';\n\nimport { generateUser, getUserDefaults } from './user';\n\nconst defaultCapabilities = [\n  'ban-channel-members',\n  'delete-any-message',\n  'delete-own-message',\n  'flag-message',\n  'mute-channel',\n  'pin-message',\n  'quote-message',\n  'read-events',\n  'send-links',\n  'send-message',\n  'send-reaction',\n  'send-reply',\n  'typing-events',\n  'update-any-message',\n  'update-own-message',\n  'upload-file',\n];\n\nconst defaultConfig = {\n  automod: 'disabled',\n  automod_behavior: 'flag',\n  commands: [\n    {\n      args: '[text]',\n      description: 'Post a random gif to the channel',\n      name: 'giphy',\n      set: 'fun_set',\n    },\n  ],\n  connect_events: true,\n  created_at: '2020-04-24T11:36:43.859020368Z',\n  max_message_length: 5000,\n  message_retention: 'infinite',\n  mutes: true,\n  name: 'messaging',\n  reactions: true,\n  read_events: true,\n  replies: true,\n  search: true,\n  typing_events: true,\n  updated_at: '2020-04-24T11:36:43.859022903Z',\n  uploads: true,\n  url_enrichment: true,\n};\nconst defaultState = {\n  members: {},\n  messages: [],\n  setIsUpToDate: jest.fn(),\n};\n\nconst getChannelDefaults = ({ id, type } = { id: uuidv4(), type: 'messaging' }) => ({\n  _client: {},\n  data: {\n    cid: `${type}:${id}`,\n    config: {\n      ...defaultConfig,\n      name: type,\n      type,\n    },\n    created_at: '2020-04-28T11:20:48.578147Z',\n    created_by: getUserDefaults(),\n    frozen: false,\n    id,\n    own_capabilities: defaultCapabilities,\n    type,\n    updated_at: '2020-04-28T11:20:48.578147Z',\n  },\n  id,\n  state: defaultState,\n  type,\n});\n\nexport const generateChannel = (customValues) =>\n  Object.keys(customValues).reduce((accumulated, current) => {\n    if (Object.prototype.hasOwnProperty.call(accumulated, current)) {\n      accumulated[current] =\n        typeof accumulated[current] === 'object'\n          ? { ...accumulated[current], ...customValues[current] }\n          : (accumulated[current] = customValues[current]);\n      return accumulated;\n    }\n    return { ...accumulated, [current]: customValues[current] };\n  }, getChannelDefaults());\n\nexport const generateChannelResponse = (\n  customValues = { channel: {}, id: uuidv4(), type: 'messaging' },\n) => {\n  const { id = uuidv4(), type = 'messaging', channel = {}, ...rest } = customValues;\n\n  const defaults = getChannelDefaults();\n  return {\n    channel: {\n      ...defaults.data,\n      ...{\n        cid: `${type}:${id}`,\n        ...channel,\n        id,\n        type,\n        user: generateUser(),\n      },\n    },\n    members: [],\n    messages: [],\n    ...rest,\n  };\n};\n"]}
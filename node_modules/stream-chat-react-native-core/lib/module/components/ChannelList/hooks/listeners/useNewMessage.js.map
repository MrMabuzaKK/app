{"version":3,"sources":["useNewMessage.ts"],"names":["useNewMessage","lockChannelOrder","setChannels","client","handleEvent","event","channels","cid","on","off"],"mappings":";;;;;;;;;AAAA;;AAIA;;AAGA;;AAQO,IAAMA,aAAa,GAAG,SAAhBA,aAAgB,OAKS;AAAA,MAFpCC,gBAEoC,QAFpCA,gBAEoC;AAAA,MADpCC,WACoC,QADpCA,WACoC;;AACpC,wBAAmB,kCAAnB;AAAA,MAAQC,MAAR,mBAAQA,MAAR;;AAEA,wBAAU,YAAM;AACd,QAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,KAAD,EAAsC;AACxDH,MAAAA,WAAW,CAAC,UAACI,QAAD,EAAc;AACxB,YAAI,CAACL,gBAAD,IAAqBI,KAAK,CAACE,GAA/B,EAAoC;AAClC,iBAAO,0BAAkC;AACvCD,YAAAA,QAAQ,EAARA,QADuC;AAEvCC,YAAAA,GAAG,EAAEF,KAAK,CAACE;AAF4B,WAAlC,CAAP;AAID;;AACD,mDAAWD,QAAX;AACD,OARU,CAAX;AASD,KAVD;;AAYAH,IAAAA,MAAM,CAACK,EAAP,CAAU,aAAV,EAAyBJ,WAAzB;AACA,WAAO;AAAA,aAAMD,MAAM,CAACM,GAAP,CAAW,aAAX,EAA0BL,WAA1B,CAAN;AAAA,KAAP;AACD,GAfD,EAeG,EAfH;AAgBD,CAxBM","sourcesContent":["import { useEffect } from 'react';\n\nimport type { Channel, Event } from 'stream-chat';\n\nimport { useChatContext } from '../../../../contexts/chatContext/ChatContext';\n\nimport type { DefaultStreamChatGenerics } from '../../../../types/types';\nimport { moveChannelUp } from '../../utils';\n\ntype Parameters<StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics> =\n  {\n    lockChannelOrder: boolean;\n    setChannels: React.Dispatch<React.SetStateAction<Channel<StreamChatGenerics>[]>>;\n  };\n\nexport const useNewMessage = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>({\n  lockChannelOrder,\n  setChannels,\n}: Parameters<StreamChatGenerics>) => {\n  const { client } = useChatContext<StreamChatGenerics>();\n\n  useEffect(() => {\n    const handleEvent = (event: Event<StreamChatGenerics>) => {\n      setChannels((channels) => {\n        if (!lockChannelOrder && event.cid) {\n          return moveChannelUp<StreamChatGenerics>({\n            channels,\n            cid: event.cid,\n          });\n        }\n        return [...channels];\n      });\n    };\n\n    client.on('message.new', handleEvent);\n    return () => client.off('message.new', handleEvent);\n  }, []);\n};\n"]}
{"version":3,"sources":["useCreateOwnCapabilitiesContext.ts"],"names":["useCreateOwnCapabilitiesContext","channel","overrideCapabilities","overrideCapabilitiesStr","JSON","stringify","Object","values","ownCapabilitiesStr","data","own_capabilities","ownCapabilitiesContext","capabilities","keys","allOwnCapabilities","reduce","result","capability","includes","id"],"mappings":";;;;;;;;;;;AAAA;;AAIA;;AAOO,IAAMA,+BAA+B,GAAG,SAAlCA,+BAAkC,OAQzC;AAAA;;AAAA,MALJC,OAKI,QALJA,OAKI;AAAA,MAJJC,oBAII,QAJJA,oBAII;AACJ,MAAMC,uBAAuB,GAAGD,oBAAoB,GAChDE,IAAI,CAACC,SAAL,CAAeC,MAAM,CAACC,MAAP,CAAcL,oBAAd,CAAf,CADgD,GAEhD,IAFJ;AAGA,MAAMM,kBAAkB,GAAGP,OAAO,QAAP,qBAAAA,OAAO,CAAEQ,IAAT,2BAAeC,gBAAf,GACvBN,IAAI,CAACC,SAAL,CAAeC,MAAM,CAACC,MAAP,CAAcN,OAAd,sCAAcA,OAAO,CAAEQ,IAAvB,qBAAc,eAAeC,gBAA7B,CAAf,CADuB,GAEvB,IAFJ;AAIA,MAAMC,sBAAmD,GAAG,oBAAQ,YAAM;AAAA;;AACxE,QAAMC,YAAY,GAAI,CAAAX,OAAO,QAAP,8BAAAA,OAAO,CAAEQ,IAAT,oCAAeC,gBAAf,KAAmC,EAAzD;AACA,QAAMC,sBAAsB,GAAGL,MAAM,CAACO,IAAP,CAAYC,0CAAZ,EAAgCC,MAAhC,CAC7B,UAACC,MAAD,EAASC,UAAT;AAAA;;AAAA,2CACKD,MADL,uCAEGC,UAFH,2BAGIf,oBAHJ,oBAGIA,oBAAoB,CAAGe,UAAH,CAHxB,oCAII,CAAC,CAACL,YAAY,CAACM,QAAb,CAAsBJ,2CAAmBG,UAAnB,CAAtB,CAJN;AAAA,KAD6B,EAO7B,EAP6B,CAA/B;AAUA,WAAON,sBAAP;AACD,GAb2D,EAazD,CAACV,OAAO,CAACkB,EAAT,EAAahB,uBAAb,EAAsCK,kBAAtC,CAbyD,CAA5D;AAeA,SAAOG,sBAAP;AACD,CAhCM","sourcesContent":["import { useMemo } from 'react';\n\nimport type { Channel } from 'stream-chat';\n\nimport {\n  allOwnCapabilities,\n  OwnCapabilitiesContextValue,\n  OwnCapability,\n} from '../../../contexts/ownCapabilitiesContext/OwnCapabilitiesContext';\nimport type { DefaultStreamChatGenerics } from '../../../types/types';\n\nexport const useCreateOwnCapabilitiesContext = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>({\n  channel,\n  overrideCapabilities,\n}: {\n  channel: Channel<StreamChatGenerics>;\n  overrideCapabilities?: Partial<OwnCapabilitiesContextValue>;\n}) => {\n  const overrideCapabilitiesStr = overrideCapabilities\n    ? JSON.stringify(Object.values(overrideCapabilities))\n    : null;\n  const ownCapabilitiesStr = channel?.data?.own_capabilities\n    ? JSON.stringify(Object.values(channel?.data?.own_capabilities as Array<string>))\n    : null;\n\n  const ownCapabilitiesContext: OwnCapabilitiesContextValue = useMemo(() => {\n    const capabilities = (channel?.data?.own_capabilities || []) as Array<string>;\n    const ownCapabilitiesContext = Object.keys(allOwnCapabilities).reduce(\n      (result, capability) => ({\n        ...result,\n        [capability]:\n          overrideCapabilities?.[capability as OwnCapability] ??\n          !!capabilities.includes(allOwnCapabilities[capability as OwnCapability]),\n      }),\n      {} as OwnCapabilitiesContextValue,\n    );\n\n    return ownCapabilitiesContext;\n  }, [channel.id, overrideCapabilitiesStr, ownCapabilitiesStr]);\n\n  return ownCapabilitiesContext;\n};\n"]}
{"version":3,"sources":["InputButtons.tsx"],"names":["styles","StyleSheet","create","attachButtonContainer","paddingRight","InputButtonsWithContext","props","AttachButton","CommandsButton","giphyActive","hasCommands","hasFilePicker","hasImagePicker","MoreOptionsButton","openCommandsPicker","setShowMoreOptions","showMoreOptions","text","toggleAttachmentPicker","theme","messageInput","commandsButtonContainer","ownCapabilities","uploadFile","undefined","areEqual","prevProps","nextProps","prevGiphyActive","prevHasCommands","prevHasFilePicker","prevHasImagePicker","prevSelectedPicker","selectedPicker","prevShowMoreOptions","prevText","nextGiphyActive","nextHasCommands","nextHasFilePicker","nextHasImagePicker","nextSelectedPicker","nextShowMoreOptions","nextText","MemoizedInputButtonsWithContext","React","memo","InputButtons"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { StyleSheet, View } from 'react-native';\n\nimport {\n  MessageInputContextValue,\n  useMessageInputContext,\n} from '../../contexts/messageInputContext/MessageInputContext';\nimport { useOwnCapabilitiesContext } from '../../contexts/ownCapabilitiesContext/OwnCapabilitiesContext';\nimport { useTheme } from '../../contexts/themeContext/ThemeContext';\n\nimport type { DefaultStreamChatGenerics } from '../../types/types';\n\nconst styles = StyleSheet.create({\n  attachButtonContainer: { paddingRight: 10 },\n});\n\nexport type InputButtonsProps<\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n> = Partial<InputButtonsWithContextProps<StreamChatGenerics>>;\n\nexport type InputButtonsWithContextProps<\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n> = Pick<\n  MessageInputContextValue<StreamChatGenerics>,\n  | 'AttachButton'\n  | 'CommandsButton'\n  | 'giphyActive'\n  | 'hasCommands'\n  | 'hasFilePicker'\n  | 'hasImagePicker'\n  | 'MoreOptionsButton'\n  | 'openCommandsPicker'\n  | 'selectedPicker'\n  | 'setShowMoreOptions'\n  | 'showMoreOptions'\n  | 'text'\n  | 'toggleAttachmentPicker'\n>;\n\nexport const InputButtonsWithContext = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>(\n  props: InputButtonsWithContextProps<StreamChatGenerics>,\n) => {\n  const {\n    AttachButton,\n    CommandsButton,\n    giphyActive,\n    hasCommands,\n    hasFilePicker,\n    hasImagePicker,\n    MoreOptionsButton,\n    openCommandsPicker,\n    setShowMoreOptions,\n    showMoreOptions,\n    text,\n    toggleAttachmentPicker,\n  } = props;\n\n  const {\n    theme: {\n      messageInput: { attachButtonContainer, commandsButtonContainer },\n    },\n  } = useTheme();\n\n  const ownCapabilities = useOwnCapabilitiesContext();\n\n  if (giphyActive) {\n    return null;\n  }\n\n  return !showMoreOptions && (hasImagePicker || hasFilePicker) && hasCommands ? (\n    <MoreOptionsButton handleOnPress={() => setShowMoreOptions(true)} />\n  ) : (\n    <>\n      {(hasImagePicker || hasFilePicker) && ownCapabilities.uploadFile && (\n        <View\n          style={[hasCommands ? styles.attachButtonContainer : undefined, attachButtonContainer]}\n        >\n          <AttachButton handleOnPress={toggleAttachmentPicker} />\n        </View>\n      )}\n      {hasCommands && !text && (\n        <View style={commandsButtonContainer}>\n          <CommandsButton handleOnPress={openCommandsPicker} />\n        </View>\n      )}\n    </>\n  );\n};\nconst areEqual = <StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics>(\n  prevProps: InputButtonsWithContextProps<StreamChatGenerics>,\n  nextProps: InputButtonsWithContextProps<StreamChatGenerics>,\n) => {\n  const {\n    giphyActive: prevGiphyActive,\n    hasCommands: prevHasCommands,\n    hasFilePicker: prevHasFilePicker,\n    hasImagePicker: prevHasImagePicker,\n    selectedPicker: prevSelectedPicker,\n    showMoreOptions: prevShowMoreOptions,\n    text: prevText,\n  } = prevProps;\n\n  const {\n    giphyActive: nextGiphyActive,\n    hasCommands: nextHasCommands,\n    hasFilePicker: nextHasFilePicker,\n    hasImagePicker: nextHasImagePicker,\n    selectedPicker: nextSelectedPicker,\n    showMoreOptions: nextShowMoreOptions,\n    text: nextText,\n  } = nextProps;\n\n  if (prevHasImagePicker !== nextHasImagePicker) {\n    return false;\n  }\n\n  if (prevHasFilePicker !== nextHasFilePicker) {\n    return false;\n  }\n\n  if (prevHasCommands !== nextHasCommands) {\n    return false;\n  }\n\n  if (prevSelectedPicker !== nextSelectedPicker) {\n    return false;\n  }\n\n  if (prevShowMoreOptions !== nextShowMoreOptions) {\n    return false;\n  }\n\n  if ((!prevProps.text && nextText) || (prevText && !nextText)) {\n    return false;\n  }\n\n  if (prevGiphyActive !== nextGiphyActive) {\n    return false;\n  }\n\n  return true;\n};\n\nconst MemoizedInputButtonsWithContext = React.memo(\n  InputButtonsWithContext,\n  areEqual,\n) as typeof InputButtonsWithContext;\n\nexport const InputButtons = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>(\n  props: InputButtonsProps<StreamChatGenerics>,\n) => {\n  const {\n    AttachButton,\n    CommandsButton,\n    giphyActive,\n    hasCommands,\n    hasFilePicker,\n    hasImagePicker,\n    MoreOptionsButton,\n    openCommandsPicker,\n    selectedPicker,\n    setShowMoreOptions,\n    showMoreOptions,\n    text,\n    toggleAttachmentPicker,\n  } = useMessageInputContext<StreamChatGenerics>();\n\n  return (\n    <MemoizedInputButtonsWithContext\n      {...{\n        AttachButton,\n        CommandsButton,\n        giphyActive,\n        hasCommands,\n        hasFilePicker,\n        hasImagePicker,\n        MoreOptionsButton,\n        openCommandsPicker,\n        selectedPicker,\n        setShowMoreOptions,\n        showMoreOptions,\n        text,\n        toggleAttachmentPicker,\n      }}\n      {...props}\n    />\n  );\n};\n"]}